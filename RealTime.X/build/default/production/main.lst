MPASM 5.87                          MAIN.ASM   2-18-2023  7:35:17         PAGE  1


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00001         PROCESSOR 16F877A
2007   3731           00002         __CONFIG 0x3731 ; Clock = XT 4MHz, standard fuse settings
                      00003         INCLUDE "P16F877A.INC"
                      00001         LIST
                      00002 ; P16F877A.INC  Standard Header File, Version 1.00    Microchip Technology, Inc.
                      00398         LIST
                      00004 
                      00005 
                      00006 ; ----------- Data Area -----------
                      00007 
  00000004            00008 LCD_RS_PIN      EQU 4           ; Register select output bit
  00000005            00009 LCD_E_PIN       EQU 5           ; Enable display input
  00000005            00010 MAX_CHARS       EQU 5
                      00011 
                      00012 
                      00013 ;       Uses GPR 70 - 75 for LCD Data
  00000070            00014 Timer1  EQU 0x70                ; 1ms count register
  00000071            00015 TimerX  EQU 0x71                ; Xms count register
  00000072            00016 Var     EQU 0x72                ; Output variable
  00000073            00017 Point   EQU 0x73                ; Program table pointer
                      00018 
                      00019 
  00000075            00020 TEMP    EQU 0x75                ; Temp store
  00000076            00021 TEMP2   EQU 0x76                ; Temp2 store
                      00022 
  00000077            00023 RESET_PROG      EQU 0x77                ; resets program
                      00024 
  00000050            00025 blinkDelay      EQU 0x50; Delay time for cursor blink :can be adjusted as needed
                      00026 
  00000041            00027 CRS_LOCATION_IN_ANIMATION EQU 0x41
                      00028 
  0000007C            00029 CSR_LOC         EQU D'124'      ; CSR_LOC: "  |  "
  00000020            00030 WHITE           EQU D'32'       ; WHITE space character
                      00031 
  00000026            00032 CURRENT_CHAR EQU 0x26
                      00033 
  00000029            00034 COUNT EQU 0x29
                      00035 
  00000030            00036 CURRENT_CHAR_INDEX EQU 0x30
                      00037 
  00000035            00038 C1 EQU 0x35
  00000036            00039 C2 EQU 0x36
  00000037            00040 C3 EQU 0x37
  00000038            00041 C4 EQU 0x38
  00000039            00042 C5 EQU 0x39
                      00043 
  00000028            00044 TIMER_INDEX                EQU 0x28
                      00045 
  00000051            00046 STRINGLEN                  EQU 0x51
                      00047 ; ---------------------------------
                      00048 ; ----------- Code Area -----------
                      00049 ; ---------------------------------
                      00050 
MPASM 5.87                          MAIN.ASM   2-18-2023  7:35:17         PAGE  2


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00051     ORG 0x0000          ; Start of program memory
0000   0000           00052     NOP                 ; For ICD mode
0001   2???           00053     GOTO START_EXECUTION
                      00054 
                      00055         ORG     0x0004 ; ISR
                      00056 
                      00057                 
0004   100C           00058         BCF     PIR1,TMR1IF
0005   1C8B           00059         BTFSS   INTCON, INTF    ; based on INTCON INTF Bit
0006   2???           00060         GOTO    ISR_FOR_TIMER
0007   2???           00061         GOTO    ISR_FOR_BTN
                      00062 
0008                  00063 RESET_TIMER
0008   3000           00064         MOVLW   0
0009   1283 1303      00065         BANKSEL TMR1L
000B   008E           00066         MOVWF   TMR1L
000C   008F           00067         MOVWF   TMR1H
000D   3002           00068         MOVLW   0x02
000E   1283 1303      00069         BANKSEL TIMER_INDEX
0010   00A8           00070         MOVWF   TIMER_INDEX
0011   0008           00071         RETURN
                      00072 
                      00073 
0012                  00074 ISR_FOR_TIMER
                      00075 
                      00076 ; TODO increment_letter, check if Z, check if space
                      00077 
0012   1283 1303      00078         BANKSEL TIMER_INDEX
Message[305]: Using default destination of 1 (file).
0014   0BA8           00079         DECFSZ  TIMER_INDEX
0015   2???           00080         GOTO    SKIP1
0016   2???           00081         CALL    MOVE_TO_NEXT_CHAR
0017   307F           00082         MOVLW   0x7f ; reset the timer
0018   00A8           00083         MOVWF   TIMER_INDEX
0019   1283 1303      00084         BANKSEL CURRENT_CHAR
001B   0826           00085         MOVF CURRENT_CHAR, W
001C   3C21           00086         SUBLW 0x21 ; ASCII Of Space + 1 
001D   1D03           00087         BTFSS   STATUS, Z
001E   2???           00088         GOTO    SKIP1
001F   1283 1303      00089         BANKSEL PORTC
0021   1687           00090         BSF     PORTC, 5
                      00091         ; CALL  FINISH_STRING
                      00092 
0022                  00093 SKIP1
0022   100C           00094     BCF         PIR1,TMR1IF     ; clear the TMR1 ov flag 
0023   108B           00095         BCF             INTCON,INTF             ; clear the External Interrupt Flag bit
0024   0009           00096     RETFIE
                      00097 
                      00098 
0025                  00099 ISR_FOR_BTN
0025   2???           00100         CALL RESET_TIMER
0026   2???           00101     CALL INCREMENT_CURRENT_CHAR
0027   2???           00102     CALL CHECK_IF_Z
MPASM 5.87                          MAIN.ASM   2-18-2023  7:35:17         PAGE  3


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0028   2???           00103         CALL CHECK_IF_SPACE
                      00104         ; CALL TEST_CHECK_TO_MOVE
                      00105 
                      00106 
0029   2???           00107         CALL DISPLAY_CURRENT_CHAR
                      00108 
                      00109         ; TODO increment_letter, check if Z, check if space
002A   100C           00110     BCF         PIR1,TMR1IF     ; clear the TMR1 ov flag 
002B   108B           00111         BCF             INTCON,INTF             ; clear the Interrupt flag 
002C   0009           00112     RETFIE
                      00113 
002D                  00114 SETUP_PORTS_DIGITAL
                      00115 
002D   1683 1303      00116         BANKSEL ADCON1 
002F   3006           00117         MOVLW   0x06            ; Disable A/D Conversion
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0030   009F           00118         MOVWF   ADCON1
                      00119 
0031   1683 1303      00120         BANKSEL CMCON 
0033   3007           00121         MOVLW   0x07            ; Disable Comparator
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0034   009C           00122         MOVWF   CMCON
                      00123 
0035   0008           00124         RETURN
                      00125 
                      00126 
0036                  00127 SETUP_INTERRUPTS
                      00128 
0036   1683 1303      00129         BANKSEL TRISB   
                      00130 
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0038   1406           00131         BSF TRISB, 0x00 ; Set Port B Direction To Input
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0039   1701           00132         BSF OPTION_REG, INTEDG ; Rising Edge
003A   108B           00133         BCF INTCON,INTF ; Clear Interrupt Flag
003B   160B           00134         BSF INTCON,INTE ; Enable RB0 Interrupt Bit 
003C   178B           00135         BSF INTCON,GIE ; Enable Global Interrupt Bit
003D   170B           00136         bsf     INTCON, PEIE        ; Enable Peripheral Interrupts
003E   178B           00137         bsf     INTCON, GIE         ; Enable Global Interrupt   
003F   1283 1303      00138         BANKSEL T1CON
0041   3039           00139         MOVLW   b'00111001'             ; TMR1 initialisation code
0042   0090           00140         MOVWF   T1CON                   ; Int clock, prescale128        
0043   3000           00141         MOVLW   b'00000000'             ; MOVE VALUE TO LOWER TMR1 REGISTER
0044   008E           00142         MOVWF   TMR1L                   ; 
0045   3000           00143         MOVLW   b'00000000'             ; MOVE VALUE TO HIGHER TMR1 REGISTER
0046   008F           00144         MOVWF   TMR1H                   ; CLEAR OVERFLOW FLAG
                      00145         
0047   1683 1303      00146         BANKSEL PIE1            ; ENABLE TMR1 INTERRUPT FLAG
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0049   140C           00147         BSF PIE1,TMR1IE
                      00148 
004A   1283 1303      00149         BANKSEL PIR1
004C   100C           00150         BCF PIR1, TMR1IF ;clear TMR1 interrupt flag
MPASM 5.87                          MAIN.ASM   2-18-2023  7:35:17         PAGE  4


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00151 
                      00152         ;Start the timer:
004D   1410           00153         BSF T1CON, TMR1ON ;set TMR1 on bit      
004E   100C           00154         BCF PIR1, TMR1IF
                      00155 
004F   307F           00156         MOVLW   0x7f
0050   00A8           00157         MOVWF   TIMER_INDEX
                      00158         ; CLEAR OVERFLOW FLAG
0051   100C           00159         BCF     PIR1,TMR1IF
                      00160 
0052   0008           00161         RETURN
                      00162 
                      00163 
0053                  00164 INIT_DEBUG_PORT
                      00165 
                      00166         ; port c is used for debugging
0053   1683 1303      00167         BANKSEL TRISC
0055   3000           00168         MOVLW   0x00            ; In order to set PORTC Direction to output
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0056   0087           00169         MOVWF   TRISC
0057   0008           00170         RETURN
                      00171 
                      00172 
                      00173 
0058                  00174 START_EXECUTION
                      00175 
0058   2???           00176         CALL INIT_DEBUG_PORT
0059   2???           00177         CALL SETUP_INTERRUPTS
005A   2???           00178         CALL SETUP_PORTS_DIGITAL
                      00179 
005B   1383           00180         BANKISEL CURRENT_CHAR_INDEX
005C   1283 1303      00181         BANKSEL CURRENT_CHAR_INDEX
                      00182 
                      00183         
                      00184 
                      00185          
                      00186 
                      00187 
                      00188 
                      00189 
005E   2???           00190         CALL    SETUP_LCD ; Initialise the display FOR LCD
005F   2???           00191         CALL    LCD_WRITE_PROMPT; write the promp "Enter String:"
                      00192 
0060   2???           00193         CALL    MOVE_CURSOR_TO_LINE_2_WRITE_A
                      00194 
0061   3035           00195     MOVLW C1
0062   00B0           00196         MOVWF CURRENT_CHAR_INDEX
                      00197 
0063   01A9           00198         CLRF COUNT
                      00199         
0064   2???           00200         CALL    BLINK_CURSOR ; blink cursor
                      00201 
                      00202 
MPASM 5.87                          MAIN.ASM   2-18-2023  7:35:17         PAGE  5


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00203 
                      00204 ; used to announce reaching a section of the code
0065                  00205 BLINK_CURSOR
                      00206 
0065   300E           00207         MOVLW   0x0E ; cursor blink
0066   2???           00208         CALL    PulseWriteCmdToLCD ; send command
                      00209 
                      00210         ; delay 10ms * 40 = 400ms
0067   3028           00211         MOVLW 0x28
0068   2???           00212         CALL DELAY_W_10_MS
                      00213 
0069   300C           00214         MOVLW   0x0C ; cursor off
006A   2???           00215         CALL    PulseWriteCmdToLCD ; send command
                      00216 
                      00217         ; delay 10ms * 20 = 200ms
006B   3014           00218         MOVLW 0x14
006C   2???           00219         CALL DELAY_W_10_MS
                      00220 
006D   2???           00221         GOTO BLINK_CURSOR ; loop for ever
                      00222 
                      00223 ; instruction delay of 10us * W (each instruction is 1us)
006E                  00224 DELAY_W 
006E   00F5           00225         MOVWF   TEMP
006F                  00226 loop_start
                      00227 
006F   0000           00228         NOP
0070   0000           00229         NOP
0071   0000           00230         NOP
0072   0000           00231         NOP
0073   0000           00232         NOP
0074   0000           00233         NOP
0075   0000           00234         NOP
0076   0000           00235         NOP
0077   0000           00236         NOP
0078   0000           00237         NOP
                      00238 
Message[305]: Using default destination of 1 (file).
0079   0BF5           00239         DECFSZ  TEMP
007A   2???           00240         GOTO    loop_start
007B   0008           00241         RETURN
                      00242 
                      00243 ; instruction delay of ms * W (each loop is 10ms)
007C                  00244 DELAY_W_10_MS   
007C   00F6           00245         MOVWF   TEMP2
007D   30FA           00246         MOVLW   0xFA
007E                  00247 lp_st
                      00248     
007E   2???           00249         CALL DELAY_W
007F   2???           00250         CALL DELAY_W
0080   2???           00251         CALL DELAY_W
0081   2???           00252         CALL DELAY_W
                      00253 
Message[305]: Using default destination of 1 (file).
MPASM 5.87                          MAIN.ASM   2-18-2023  7:35:17         PAGE  6


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0082   0BF6           00254         DECFSZ  TEMP2
0083   2???           00255         GOTO    lp_st
0084   0008           00256         RETURN
                      00257 
                      00258 ;--------------------------------------------------------------Start LCD CODE---------------------------
                            -------
                      00259 ;       1ms delay with 1us instruction time (1000 cycles)
                      00260 ;--------------------------------------------------------------
0085   30F9           00261 onems   MOVLW   D'249'          ; Count for 1ms delay 
0086   00F0           00262         MOVWF   Timer1          ; Load count
0087   0000           00263 LP      NOP                     ; Pad for 4 cycle loop
Message[305]: Using default destination of 1 (file).
0088   0BF0           00264         DECFSZ  Timer1          ; Count
0089   2???           00265         GOTO    LP              ; until Z
008A   0008           00266         RETURN                  ; and finish
                      00267 
                      00268 ;--------------------------------------------------------------
                      00269 ;       Generate data/command clock siganl E
                      00270 ;--------------------------------------------------------------
008B   1688           00271 PULSE_LCD_E_PIN BSF     PORTD, LCD_E_PIN                ; Set E high
008C   2???           00272         CALL    onems           ; Delay 1ms
008D   1288           00273         BCF     PORTD, LCD_E_PIN                ; Reset E low
008E   2???           00274         CALL    onems           ; Delay 1ms
008F   0008           00275         RETURN                  ; done
                      00276 
                      00277 
                      00278 ;--------------------------------------------------------------
                      00279 ;       Initialise the display
                      00280 ;--------------------------------------------------------------
0090                  00281 SETUP_LCD       
                      00282 
0090   1683 1303      00283         BANKSEL TRISD
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0092   0188           00284         CLRF TRISD ; Port D as output to LCD
                      00285 
0093   1283 1303      00286         BANKSEL PORTD
                      00287 
0095   0188           00288         CLRF    PORTD           ; and output it to display
                      00289 
0096   3040           00290         MOVLW   0x40            ; wait for display start
0097   2???           00291         CALL    DELAY_W
                      00292         
                      00293         
0098   3002           00294         MOVLW   0x02    ; Set 4-bit mode
0099   2???           00295         CALL    PulseWriteCmdToLCD ; send command
                      00296         
009A   3028           00297         MOVLW   0x28            ; Set 5 by 7 mode
009B   2???           00298         CALL    PulseWriteCmdToLCD ; send command
                      00299 
                      00300         ; TODO remove
                      00301         ; MOVLW 0x08            ; Switch off display
                      00302         ; CALL  PulseWriteCmdToLCD ; send command
                      00303 
MPASM 5.87                          MAIN.ASM   2-18-2023  7:35:17         PAGE  7


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

009C   3001           00304         MOVLW   0x01            ; Code to clear display
009D   2???           00305         CALL    PulseWriteCmdToLCD ; send command
                      00306 
009E   300E           00307         MOVLW   0x0E            ; Display ON and cursor blinking
009F   2???           00308     CALL        PulseWriteCmdToLCD      ; send command
                      00309 
                      00310         ; MOVLW 0x06            ; Enable cursor auto inc  
                      00311         ; CALL  PulseWriteCmdToLCD ; send command
                      00312 
00A0   3080           00313         MOVLW   0x80            ; move cursor to first line, first column
00A1   2???           00314         CALL    PulseWriteCmdToLCD ; send command
                      00315 
00A2   300C           00316         MOVLW   0x0C            ; Turn on display  
00A3   2???           00317         CALL    PulseWriteCmdToLCD ; send command
                      00318 
00A4   0008           00319         RETURN                  ; Done
                      00320 
                      00321 
00A5                  00322 PulseWriteCmdToLCD
00A5   00F5           00323         MOVWF TEMP
Message[305]: Using default destination of 1 (file).
00A6   0EF5           00324         SWAPF TEMP
00A7   0875           00325         MOVF TEMP, W
00A8   390F           00326         ANDLW 0x0f
00A9   0088           00327         MOVWF PORTD
00AA   1208           00328         BCF PORTD, LCD_RS_PIN ;Clearing the LCD_RS_PIN Register for command mode
00AB   2???           00329         call PULSE_LCD_E_PIN
                      00330         ;call onems
Message[305]: Using default destination of 1 (file).
00AC   0EF5           00331         SWAPF TEMP
00AD   0875           00332         movf TEMP, W
00AE   390F           00333         ANDLW   0x0f
00AF   0088           00334         MOVWF PORTD
00B0   1208           00335         BCF PORTD, LCD_RS_PIN ;Clearing the LCD_RS_PIN Register for command mode
00B1   2???           00336         call PULSE_LCD_E_PIN
00B2   0008           00337         RETURN
                      00338 
                      00339 ;--------------------------------------------------------------
                      00340 ;       Send a char byte
                      00341 ;--------------------------------------------------------------
00B3                  00342 PulseWriteCharToLCD
00B3   00F5           00343     MOVWF TEMP
Message[305]: Using default destination of 1 (file).
00B4   0EF5           00344     SWAPF TEMP
00B5   0875           00345     MOVF TEMP, W
00B6   390F           00346     ANDLW 0x0F ; Clear low nybble
00B7   0088           00347     MOVWF PORTD
00B8   1608           00348     BSF PORTD, LCD_RS_PIN ; set character mode on RS
00B9   2???           00349     call PULSE_LCD_E_PIN ; clock LCD
00BA   2???           00350     call onems
Message[305]: Using default destination of 1 (file).
00BB   0EF5           00351     SWAPF TEMP
00BC   0875           00352     MOVF TEMP, W
MPASM 5.87                          MAIN.ASM   2-18-2023  7:35:17         PAGE  8


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00BD   390F           00353     ANDLW       0x0F ; Clear high nybble
00BE   0088           00354     MOVWF PORTD
00BF   1608           00355     BSF PORTD, LCD_RS_PIN 
00C0   2???           00356     call PULSE_LCD_E_PIN 
00C1   0008           00357     RETURN
                      00358 
00C2                  00359 MOVE_CURSOR_TO_LINE_2_WRITE_A
                      00360 
00C2   30C0           00361         MOVLW   0xC0            
00C3   2???           00362         CALL    PulseWriteCmdToLCD ; send command
                      00363 
00C4   3041           00364         MOVLW 'A'
00C5   00A6           00365         MOVWF CURRENT_CHAR ; move A to current char
                      00366 
00C6   2???           00367         CALL DISPLAY_CURRENT_CHAR
                      00368 
00C7   0008           00369         RETURN
                      00370 
                      00371 
                      00372 
                      00373 
                      00374 
00C8                  00375 DISPLAY_CURRENT_CHAR
                      00376 
00C8   300C           00377     MOVLW       0x0C    ; turn cursor off
00C9   2???           00378         CALL    PulseWriteCmdToLCD ; send command
                      00379 
00CA   0826           00380     MOVF CURRENT_CHAR, W
00CB   2???           00381         CALL PulseWriteCharToLCD
                      00382 
00CC   3010           00383         MOVLW   0x10 ; shift cursor to left
00CD   2???           00384         CALL    PulseWriteCmdToLCD ; send command
                      00385 
00CE   300E           00386     MOVLW       0x0E    ; turn cursor on
00CF   2???           00387         CALL    PulseWriteCmdToLCD ; send command
                      00388         
00D0   0008           00389         RETURN
                      00390 
00D1                  00391 LCD_WRITE_PROMPT 
                      00392 
00D1   3080           00393         MOVLW   0x80            ; move cursor to first line, first column
00D2   2???           00394         CALL    PulseWriteCmdToLCD ; send command
                      00395 
00D3   3045           00396         MOVLW 'E';
00D4   2???           00397         CALL PulseWriteCharToLCD;
                      00398 
00D5   306E           00399         MOVLW 'n';
00D6   2???           00400         CALL PulseWriteCharToLCD;
                      00401 
00D7   3074           00402         MOVLW 't';
00D8   2???           00403         CALL PulseWriteCharToLCD;
                      00404 
00D9   3065           00405         MOVLW 'e'; 
MPASM 5.87                          MAIN.ASM   2-18-2023  7:35:17         PAGE  9


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00DA   2???           00406         CALL PulseWriteCharToLCD;
                      00407 
00DB   3072           00408         MOVLW 'r';
00DC   2???           00409         CALL PulseWriteCharToLCD;
                      00410 
00DD   3020           00411         MOVLW ' ';
00DE   2???           00412         CALL PulseWriteCharToLCD;
                      00413 
00DF   3053           00414         MOVLW 'S';
00E0   2???           00415         CALL PulseWriteCharToLCD;
                      00416 
00E1   3074           00417         MOVLW 't';
00E2   2???           00418         CALL PulseWriteCharToLCD;
                      00419 
00E3   3072           00420         MOVLW 'r';
00E4   2???           00421         CALL PulseWriteCharToLCD;
                      00422 
00E5   3069           00423         MOVLW 'i';
00E6   2???           00424         CALL PulseWriteCharToLCD;
                      00425 
00E7   306E           00426         MOVLW 'n'; 
00E8   2???           00427         CALL PulseWriteCharToLCD;
                      00428 
00E9   3067           00429         MOVLW 'g';
00EA   2???           00430         CALL PulseWriteCharToLCD;
                      00431 
00EB   303A           00432         MOVLW ':';
00EC   2???           00433         CALL PulseWriteCharToLCD;
                      00434 
00ED   0008           00435         RETURN
                      00436 
                      00437 ; ----------------------------- LOGIC -----------------------------
                      00438 
00EE                  00439 CHECK_IF_SPACE
                      00440 
00EE   0826           00441     MOVF CURRENT_CHAR, W
00EF   3C21           00442         SUBLW 0x21 ; ASCII Of Space + 1
                      00443 
00F0   1D03           00444         BTFSS STATUS, Z ; Test zero & skip
00F1   0008           00445     RETURN
                      00446 
00F2   3041           00447         MOVLW 'A'
00F3   00A6           00448         MOVWF CURRENT_CHAR ; move A to current char
                      00449 
00F4   0008           00450         RETURN
                      00451 
00F5                  00452 CHECK_IF_Z
00F5   0826           00453         MOVF CURRENT_CHAR, W
00F6   3C5B           00454         SUBLW 0x5B ; ASCII Of 'Z' + 1
                      00455 
00F7   1D03           00456         BTFSS STATUS, Z ; Test zero & skip
00F8   0008           00457     RETURN
                      00458 
MPASM 5.87                          MAIN.ASM   2-18-2023  7:35:17         PAGE 10


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00F9   3020           00459         MOVLW ' '
00FA   00A6           00460         MOVWF CURRENT_CHAR ; move A to current char
                      00461 
00FB   0008           00462         RETURN
                      00463 
                      00464 
00FC                  00465 TEST_CHECK_TO_MOVE
00FC   0826           00466         MOVF CURRENT_CHAR, W
00FD   3C45           00467         SUBLW 0x45 ; ASCII Of 'X' + 1
                      00468 
00FE   1D03           00469         BTFSS STATUS, Z ; Test zero & skip
00FF   0008           00470     RETURN
                      00471 
0100   2???           00472         CALL MOVE_TO_NEXT_CHAR
                      00473 
0101   0008           00474         RETURN
                      00475 
0102                  00476 INCREMENT_CURRENT_CHAR
                      00477 
0102   0AA6           00478     INCF CURRENT_CHAR, 1
                      00479 
0103   0008           00480         RETURN
                      00481 
0104                  00482 MOVE_TO_NEXT_CHAR
                      00483 
0104   0183           00484     CLRF STATUS
                      00485 
0105   1283 1303      00486         BANKSEL C1
0107   1383           00487         BCF STATUS, IRP ; bank select for indirect
                      00488 
                      00489 
                      00490         ; Load address of array pointer into FSR
0108   0830           00491         MOVF CURRENT_CHAR_INDEX, W
                      00492 
0109   0000           00493         NOP
                      00494         
                      00495         
010A   0084           00496     MOVWF FSR
                      00497 
010B   1383           00498         BANKISEL C1
                      00499     
                      00500         ; Load current char into w then into array ptr
010C   0826           00501         MOVF CURRENT_CHAR, W
010D   0080           00502         MOVWF INDF
                      00503 
010E   0AB0           00504         INCF CURRENT_CHAR_INDEX, 1
                      00505 
010F   0826           00506         MOVF CURRENT_CHAR, W
0110   3C20           00507         SUBLW 0x20 ; ASCII Of Space + 1
                      00508 
0111   1903           00509         BTFSC STATUS, Z ; Test zero & skip
0112   2???           00510     GOTO        FINISH_STRING
                      00511 
MPASM 5.87                          MAIN.ASM   2-18-2023  7:35:17         PAGE 11


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00512         
                      00513 
0113   3014           00514         MOVLW   0x14 ; shift cursor to right
0114   2???           00515         CALL    PulseWriteCmdToLCD ; send command
                      00516 
                      00517         ; check count ; -------------------
                      00518 
0115   0AA9           00519         INCF COUNT, 0x1
                      00520 
0116   0103           00521         CLRW 
                      00522 
0117   1103           00523         BCF STATUS, Z
                      00524 
0118   3041           00525         MOVLW 0x41
0119   00A6           00526         MOVWF CURRENT_CHAR ; move A to current char
011A   2???           00527         CALL    PulseWriteCharToLCD
                      00528 
011B   3010           00529         MOVLW   0x10 ; shift cursor to left
011C   2???           00530         CALL    PulseWriteCmdToLCD ; send command
                      00531 
                      00532 
011D   0829           00533         MOVF COUNT, W
011E   3C05           00534         SUBLW MAX_CHARS
011F   1903           00535         BTFSC   STATUS, Z ; if reached 5 go to FINISH_STRING
0120   2???           00536         GOTO    FINISH_STRING
                      00537 
                      00538         ; ----------------------------------
                      00539 
                      00540 
0121   0008           00541     RETURN
                      00542 
0122                  00543 CHECK_RESET
                      00544 
0122   3035           00545    MOVLW C1
0123   00B0           00546    MOVWF CURRENT_CHAR_INDEX
                      00547 
0124   01A9           00548    CLRF COUNT
0125   01B5           00549    CLRF C1
0126   01B6           00550    CLRF C2
0127   01B7           00551    CLRF C3
0128   01B8           00552    CLRF C4
0129   01B9           00553    CLRF C5
                      00554    
012A   0009           00555    RETFIE
                      00556 
012B                  00557 FINISH_STRING
                      00558 
012B   3008           00559     MOVLW       0x08 ; turn off display
012C   2???           00560         CALL    PulseWriteCmdToLCD ; send command
                      00561 
012D   1707           00562         BSF PORTC, 6
                      00563 
                      00564     ; delay 10ms * 100 = 1 s
MPASM 5.87                          MAIN.ASM   2-18-2023  7:35:17         PAGE 12


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

012E   3064           00565         MOVLW 0x64
012F   2???           00566         CALL DELAY_W_10_MS
                      00567 
0130                  00568 MOVING_LOOP_S
                      00569 
0130   3001           00570         MOVLW   0x01 ; clear display
0131   2???           00571         CALL    PulseWriteCmdToLCD ; send command
                      00572 
0132   300C           00573         MOVLW   0x0C ; turn on display without cursor
0133   2???           00574         CALL    PulseWriteCmdToLCD ; send command
                      00575 
0134   3080           00576         MOVLW   0x80 ; set cursor at begining of 1st line
0135   2???           00577         CALL    PulseWriteCmdToLCD ; send command
                      00578     
0136   0835           00579     MOVF C1, W 
0137   2???           00580         CALL    PulseWriteCharToLCD
0138   0836           00581         MOVF C2, W 
0139   2???           00582         CALL    PulseWriteCharToLCD
013A   0837           00583         MOVF C3, W 
013B   2???           00584         CALL    PulseWriteCharToLCD
013C   0838           00585         MOVF C4, W 
013D   2???           00586         CALL    PulseWriteCharToLCD
013E   0839           00587         MOVF C5, W 
013F   2???           00588         CALL    PulseWriteCharToLCD
                      00589 
                      00590 
                      00591 
0140   01C1           00592         CLRF CRS_LOCATION_IN_ANIMATION
                      00593 
0141                  00594 MOVING_LOOP
                      00595 
0141   3080           00596     MOVLW       0x80 ; set cursor at begining of 1st line
0142   2???           00597         CALL    PulseWriteCmdToLCD ; send command
                      00598 
0143   301C           00599     MOVLW       0x1C ; shift screen to the right
0144   2???           00600         CALL    PulseWriteCmdToLCD ; send command
                      00601     
                      00602         ; delay 10ms * 50 = 500ms
0145   3032           00603         MOVLW 0x32
0146   2???           00604         CALL DELAY_W_10_MS
                      00605 
0147   0AC1           00606         INCF CRS_LOCATION_IN_ANIMATION, 1
                      00607 
0148   0841           00608         MOVF CRS_LOCATION_IN_ANIMATION, W
0149   3C10           00609     SUBLW 0x10 ; column 16
014A   1C03           00610     BTFSS STATUS, C
014B   2???           00611     GOTO REACHED_LINE_END
014C   2???           00612         GOTO MOVING_LOOP
                      00613 
                      00614 
014D                  00615 REACHED_LINE_END
                      00616 
014D   3001           00617     MOVLW       0x01 ; clear screen
MPASM 5.87                          MAIN.ASM   2-18-2023  7:35:17         PAGE 13


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

014E   2???           00618         CALL    PulseWriteCmdToLCD ; send command
                      00619 
014F   30C0           00620         MOVLW   0xC0 ; set cursor at begining of 2nd line
0150   2???           00621         CALL    PulseWriteCmdToLCD ; send command
                      00622 
0151   301C           00623         MOVLW   0x1C ; shift screen to the right
0152   2???           00624         CALL    PulseWriteCmdToLCD ; send command
0153   301C           00625         MOVLW   0x1C ; shift screen to the right
0154   2???           00626         CALL    PulseWriteCmdToLCD ; send command
0155   301C           00627         MOVLW   0x1C ; shift screen to the right
0156   2???           00628         CALL    PulseWriteCmdToLCD ; send command
0157   301C           00629         MOVLW   0x1C ; shift screen to the right
0158   2???           00630         CALL    PulseWriteCmdToLCD ; send command
0159   301C           00631         MOVLW   0x1C ; shift screen to the right
015A   2???           00632         CALL    PulseWriteCmdToLCD ; send command
015B   301C           00633         MOVLW   0x1C ; shift screen to the right
015C   2???           00634         CALL    PulseWriteCmdToLCD ; send command
015D   301C           00635         MOVLW   0x1C ; shift screen to the right
015E   2???           00636         CALL    PulseWriteCmdToLCD ; send command
015F   301C           00637         MOVLW   0x1C ; shift screen to the right
0160   2???           00638         CALL    PulseWriteCmdToLCD ; send command
0161   301C           00639         MOVLW   0x1C ; shift screen to the right
0162   2???           00640         CALL    PulseWriteCmdToLCD ; send command
0163   301C           00641         MOVLW   0x1C ; shift screen to the right
0164   2???           00642         CALL    PulseWriteCmdToLCD ; send command
0165   301C           00643         MOVLW   0x1C ; shift screen to the right
0166   2???           00644         CALL    PulseWriteCmdToLCD ; send command
0167   301C           00645         MOVLW   0x1C ; shift screen to the right
0168   2???           00646         CALL    PulseWriteCmdToLCD ; send command
0169   301C           00647         MOVLW   0x1C ; shift screen to the right
016A   2???           00648         CALL    PulseWriteCmdToLCD ; send command
016B   301C           00649         MOVLW   0x1C ; shift screen to the right
016C   2???           00650         CALL    PulseWriteCmdToLCD ; send command
016D   301C           00651         MOVLW   0x1C ; shift screen to the right
016E   2???           00652         CALL    PulseWriteCmdToLCD ; send command
016F   301C           00653         MOVLW   0x1C ; shift screen to the right
0170   2???           00654         CALL    PulseWriteCmdToLCD ; send command
                      00655 
0171   0835           00656         MOVF C1, W 
0172   2???           00657         CALL    PulseWriteCharToLCD
0173   0836           00658         MOVF C2, W 
0174   2???           00659         CALL    PulseWriteCharToLCD
0175   0837           00660         MOVF C3, W 
0176   2???           00661         CALL    PulseWriteCharToLCD
0177   0838           00662         MOVF C4, W 
0178   2???           00663         CALL    PulseWriteCharToLCD
0179   0839           00664         MOVF C5, W 
017A   2???           00665         CALL    PulseWriteCharToLCD
                      00666 
017B   0AC1           00667         INCF CRS_LOCATION_IN_ANIMATION, 1
017C   0AC1           00668         INCF CRS_LOCATION_IN_ANIMATION, 1
017D   0AC1           00669         INCF CRS_LOCATION_IN_ANIMATION, 1
017E   0AC1           00670         INCF CRS_LOCATION_IN_ANIMATION, 1
MPASM 5.87                          MAIN.ASM   2-18-2023  7:35:17         PAGE 14


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

017F   0AC1           00671         INCF CRS_LOCATION_IN_ANIMATION, 1
0180   0AC1           00672         INCF CRS_LOCATION_IN_ANIMATION, 1
0181   0AC1           00673         INCF CRS_LOCATION_IN_ANIMATION, 1
                      00674 
0182                  00675 REACHED_LINE_END_LOOP
                      00676 
0182   3018           00677         MOVLW   0x18 ; shift screen to the left
0183   2???           00678         CALL    PulseWriteCmdToLCD ; send command
                      00679     
                      00680         ; delay 10ms * 50 = 500ms
0184   3032           00681         MOVLW 0x32
0185   2???           00682         CALL DELAY_W_10_MS
                      00683 
0186   03C1           00684         DECF CRS_LOCATION_IN_ANIMATION, 1
                      00685 
0187   0841           00686         MOVF CRS_LOCATION_IN_ANIMATION, W
0188   1903           00687     BTFSC STATUS, Z
0189   2???           00688     GOTO MOVING_LOOP_S
018A   2???           00689         GOTO REACHED_LINE_END_LOOP
                      00690 
018B   0008           00691         RETURN
                      00692 
018C                  00693 DONE
3731                  00694         END
MPASM 5.87                          MAIN.ASM   2-18-2023  7:35:17         PAGE 15


SYMBOL TABLE
  LABEL                             VALUE 

ACKDT                             00000005
ACKEN                             00000004
ACKSTAT                           00000006
ADCON0                            0000001F
ADCON1                            0000009F
ADCS0                             00000006
ADCS1                             00000007
ADDEN                             00000003
ADFM                              00000007
ADIE                              00000006
ADIF                              00000006
ADON                              00000000
ADRESH                            0000001E
ADRESL                            0000009E
BCLIE                             00000003
BCLIF                             00000003
BF                                00000000
BLINK_CURSOR                      00000065
BRGH                              00000002
C                                 00000000
C1                                00000035
C1INV                             00000004
C1OUT                             00000006
C2                                00000036
C2INV                             00000005
C2OUT                             00000007
C3                                00000037
C4                                00000038
C5                                00000039
CCP1CON                           00000017
CCP1IE                            00000002
CCP1IF                            00000002
CCP1M0                            00000000
CCP1M1                            00000001
CCP1M2                            00000002
CCP1M3                            00000003
CCP1X                             00000005
CCP1Y                             00000004
CCP2CON                           0000001D
CCP2IE                            00000000
CCP2IF                            00000000
CCP2M0                            00000000
CCP2M1                            00000001
CCP2M2                            00000002
CCP2M3                            00000003
CCP2X                             00000005
CCP2Y                             00000004
CCPR1H                            00000016
CCPR1L                            00000015
CCPR2H                            0000001C
CCPR2L                            0000001B
CHECK_IF_SPACE                    000000EE
CHECK_IF_Z                        000000F5
MPASM 5.87                          MAIN.ASM   2-18-2023  7:35:17         PAGE 16


SYMBOL TABLE
  LABEL                             VALUE 

CHECK_RESET                       00000122
CHS0                              00000003
CHS1                              00000004
CHS2                              00000005
CIS                               00000003
CKE                               00000006
CKP                               00000004
CM0                               00000000
CM1                               00000001
CM2                               00000002
CMCON                             0000009C
CMIE                              00000006
CMIF                              00000006
COUNT                             00000029
CREN                              00000004
CRS_LOCATION_IN_ANIMATION         00000041
CSRC                              00000007
CSR_LOC                           0000007C
CURRENT_CHAR                      00000026
CURRENT_CHAR_INDEX                00000030
CVR0                              00000000
CVR1                              00000001
CVR2                              00000002
CVR3                              00000003
CVRCON                            0000009D
CVREN                             00000007
CVROE                             00000006
CVRR                              00000005
D                                 00000005
DATA_ADDRESS                      00000005
DC                                00000001
DELAY_W                           0000006E
DELAY_W_10_MS                     0000007C
DISPLAY_CURRENT_CHAR              000000C8
DONE                              0000018C
D_A                               00000005
EEADR                             0000010D
EEADRH                            0000010F
EECON1                            0000018C
EECON2                            0000018D
EEDATA                            0000010C
EEDATH                            0000010E
EEIE                              00000004
EEIF                              00000004
EEPGD                             00000007
F                                 00000001
FERR                              00000002
FINISH_STRING                     0000012B
FSR                               00000004
GCEN                              00000007
GIE                               00000007
GO                                00000002
GO_DONE                           00000002
MPASM 5.87                          MAIN.ASM   2-18-2023  7:35:17         PAGE 17


SYMBOL TABLE
  LABEL                             VALUE 

I2C_DATA                          00000005
I2C_READ                          00000002
I2C_START                         00000003
I2C_STOP                          00000004
IBF                               00000007
IBOV                              00000005
INCREMENT_CURRENT_CHAR            00000102
INDF                              00000000
INIT_DEBUG_PORT                   00000053
INTCON                            0000000B
INTE                              00000004
INTEDG                            00000006
INTF                              00000001
IRP                               00000007
ISR_FOR_BTN                       00000025
ISR_FOR_TIMER                     00000012
LCD_E_PIN                         00000005
LCD_RS_PIN                        00000004
LCD_WRITE_PROMPT                  000000D1
LP                                00000087
MAX_CHARS                         00000005
MOVE_CURSOR_TO_LINE_2_WRITE_A     000000C2
MOVE_TO_NEXT_CHAR                 00000104
MOVING_LOOP                       00000141
MOVING_LOOP_S                     00000130
NOT_A                             00000005
NOT_ADDRESS                       00000005
NOT_BO                            00000000
NOT_BOR                           00000000
NOT_DONE                          00000002
NOT_PD                            00000003
NOT_POR                           00000001
NOT_RBPU                          00000007
NOT_RC8                           00000006
NOT_T1SYNC                        00000002
NOT_TO                            00000004
NOT_TX8                           00000006
NOT_W                             00000002
NOT_WRITE                         00000002
OBF                               00000006
OERR                              00000001
OPTION_REG                        00000081
P                                 00000004
PCFG0                             00000000
PCFG1                             00000001
PCFG2                             00000002
PCFG3                             00000003
PCL                               00000002
PCLATH                            0000000A
PCON                              0000008E
PEIE                              00000006
PEN                               00000002
PIE1                              0000008C
MPASM 5.87                          MAIN.ASM   2-18-2023  7:35:17         PAGE 18


SYMBOL TABLE
  LABEL                             VALUE 

PIE2                              0000008D
PIR1                              0000000C
PIR2                              0000000D
PORTA                             00000005
PORTB                             00000006
PORTC                             00000007
PORTD                             00000008
PORTE                             00000009
PR2                               00000092
PS0                               00000000
PS1                               00000001
PS2                               00000002
PSA                               00000003
PSPIE                             00000007
PSPIF                             00000007
PSPMODE                           00000004
PULSE_LCD_E_PIN                   0000008B
Point                             00000073
PulseWriteCharToLCD               000000B3
PulseWriteCmdToLCD                000000A5
R                                 00000002
RBIE                              00000003
RBIF                              00000000
RC8_9                             00000006
RC9                               00000006
RCD8                              00000000
RCEN                              00000003
RCIE                              00000005
RCIF                              00000005
RCREG                             0000001A
RCSTA                             00000018
RD                                00000000
REACHED_LINE_END                  0000014D
REACHED_LINE_END_LOOP             00000182
READ_WRITE                        00000002
RESET_PROG                        00000077
RESET_TIMER                       00000008
RP0                               00000005
RP1                               00000006
RSEN                              00000001
RX9                               00000006
RX9D                              00000000
R_W                               00000002
S                                 00000003
SEN                               00000000
SETUP_INTERRUPTS                  00000036
SETUP_LCD                         00000090
SETUP_PORTS_DIGITAL               0000002D
SKIP1                             00000022
SMP                               00000007
SPBRG                             00000099
SPEN                              00000007
SREN                              00000005
MPASM 5.87                          MAIN.ASM   2-18-2023  7:35:17         PAGE 19


SYMBOL TABLE
  LABEL                             VALUE 

SSPADD                            00000093
SSPBUF                            00000013
SSPCON                            00000014
SSPCON2                           00000091
SSPEN                             00000005
SSPIE                             00000003
SSPIF                             00000003
SSPM0                             00000000
SSPM1                             00000001
SSPM2                             00000002
SSPM3                             00000003
SSPOV                             00000006
SSPSTAT                           00000094
START_EXECUTION                   00000058
STATUS                            00000003
STRINGLEN                         00000051
SYNC                              00000004
T0CS                              00000005
T0IE                              00000005
T0IF                              00000002
T0SE                              00000004
T1CKPS0                           00000004
T1CKPS1                           00000005
T1CON                             00000010
T1INSYNC                          00000002
T1OSCEN                           00000003
T1SYNC                            00000002
T2CKPS0                           00000000
T2CKPS1                           00000001
T2CON                             00000012
TEMP                              00000075
TEMP2                             00000076
TEST_CHECK_TO_MOVE                000000FC
TIMER_INDEX                       00000028
TMR0                              00000001
TMR0IE                            00000005
TMR0IF                            00000002
TMR1CS                            00000001
TMR1H                             0000000F
TMR1IE                            00000000
TMR1IF                            00000000
TMR1L                             0000000E
TMR1ON                            00000000
TMR2                              00000011
TMR2IE                            00000001
TMR2IF                            00000001
TMR2ON                            00000002
TOUTPS0                           00000003
TOUTPS1                           00000004
TOUTPS2                           00000005
TOUTPS3                           00000006
TRISA                             00000085
TRISB                             00000086
MPASM 5.87                          MAIN.ASM   2-18-2023  7:35:17         PAGE 20


SYMBOL TABLE
  LABEL                             VALUE 

TRISC                             00000087
TRISD                             00000088
TRISE                             00000089
TRISE0                            00000000
TRISE1                            00000001
TRISE2                            00000002
TRMT                              00000001
TX8_9                             00000006
TX9                               00000006
TX9D                              00000000
TXD8                              00000000
TXEN                              00000005
TXIE                              00000004
TXIF                              00000004
TXREG                             00000019
TXSTA                             00000098
Timer1                            00000070
TimerX                            00000071
UA                                00000001
Var                               00000072
W                                 00000000
WCOL                              00000007
WHITE                             00000020
WR                                00000001
WREN                              00000002
WRERR                             00000003
Z                                 00000002
_BODEN_OFF                        00003FBF
_BODEN_ON                         00003FFF
_CPD_OFF                          00003FFF
_CPD_ON                           00003EFF
_CP_ALL                           00001FFF
_CP_OFF                           00003FFF
_DEBUG_OFF                        00003FFF
_DEBUG_ON                         000037FF
_HS_OSC                           00003FFE
_LP_OSC                           00003FFC
_LVP_OFF                          00003F7F
_LVP_ON                           00003FFF
_PWRTE_OFF                        00003FFF
_PWRTE_ON                         00003FF7
_RC_OSC                           00003FFF
_WDT_OFF                          00003FFB
_WDT_ON                           00003FFF
_WRT_1FOURTH                      00003BFF
_WRT_256                          00003DFF
_WRT_HALF                         000039FF
_WRT_OFF                          00003FFF
_XT_OSC                           00003FFD
__16F877A                         00000001
blinkDelay                        00000050
loop_start                        0000006F
lp_st                             0000007E
MPASM 5.87                          MAIN.ASM   2-18-2023  7:35:17         PAGE 21


SYMBOL TABLE
  LABEL                             VALUE 

onems                             00000085

Errors   :     0
Warnings :     0 reported,     0 suppressed
Messages :    15 reported,     0 suppressed

